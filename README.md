# Copfinder

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `config/env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `COPART_*` –∏ –æ–±—â–∏–µ `TELEGRAM_*` —Ç–æ–∫–µ–Ω—ã/—á–∞—Ç—ã.
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `config/copart.config.json` –∏ `config/iaai.config.json` –ø–æ–¥ —Å–≤–æ–∏ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.
  - –û–±–∞ –∫–æ–Ω—Ñ–∏–≥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–æ—Ä–º–∞—Ç —Å –º–∞—Å—Å–∏–≤–æ–º `searches`, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø–æ–∏—Å–∫ –∏–º–µ–µ—Ç:
    - `label` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞
    - `url` ‚Äî URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∏—Å–∫–∞
    - `cron` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"0 10 * * *"` –¥–ª—è 10:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
    - `messageThreadId` ‚Äî ID —Ç–µ–º—ã –≤ Telegram –≥—Ä—É–ø–ø–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, `null` –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ —á–∞—Ç–∞)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`.

### –ó–∞–ø—É—Å–∫ –±–µ–∑ PM2 (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Copart: `npm run copart:watch` (—Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—Ä–æ–Ω-–∑–∞–¥–∞—á–∏).
- –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ IAAI: `npm run iaai:schedule`.

### –ó–∞–ø—É—Å–∫ —Å PM2 (–∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏)
PM2 —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç. –ü—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞: `npm run pm2:start`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `npm run pm2:status`
3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤: `npm run pm2:logs`
4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞: `npm run pm2:stop`
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: `npm run pm2:restart`

**–í–∞–∂–Ω–æ:** PM2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏. –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `logs/`.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç sudo): `sudo npm install -g pm2`

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ AWS

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ Amazon Web Services. –î–æ—Å—Ç—É–ø–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. **AWS EC2** ‚Äî –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –ø–æ—Ö–æ–∂ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
2. **AWS ECS/Fargate** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º
3. **Docker Compose –Ω–∞ EC2** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å Docker

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:

- **[aws/EC2_SETUP.md](aws/EC2_SETUP.md)** ‚Äî ‚≠ê **–ù–ê–ß–ù–ò–¢–ï –ó–î–ï–°–¨ –¥–ª—è EC2** ‚Äî –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ EC2 —á–µ—Ä–µ–∑ AWS Console
- **[aws/DEPLOYMENT.md](aws/DEPLOYMENT.md)** ‚Äî üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** ‚Äî –ö–∞–∫ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **[aws/COST_MONITORING.md](aws/COST_MONITORING.md)** ‚Äî üí∞ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–æ–≤** ‚Äî –ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ AWS
- **[aws/AWS_CONSOLE_SETUP.md](aws/AWS_CONSOLE_SETUP.md)** ‚Äî –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è EC2 –∏ ECS/Fargate
- **[aws/CONSOLE_QUICK_REFERENCE.md](aws/CONSOLE_QUICK_REFERENCE.md)** ‚Äî –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **[aws/CHECKLIST.md](aws/CHECKLIST.md)** ‚Äî –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **[aws/README.md](aws/README.md)** ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- **[aws/QUICKSTART.md](aws/QUICKSTART.md)** ‚Äî –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ EC2:

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export AWS_INSTANCE_ID="i-xxxxxxxxxxxxx"
export AWS_SSH_KEY="~/.ssh/aws-key.pem"

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
./aws/ec2-deploy.sh

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh -i ~/.ssh/aws-key.pem ec2-user@YOUR_IP
cd /opt/copfinder
cp config/env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã
pm2 restart ecosystem.config.cjs
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ ECS/Fargate:

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
export AWS_REGION="us-east-1"
export AWS_ACCOUNT_ID="123456789012"

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ AWS Secrets Manager
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
./aws/ecs-deploy.sh
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Terraform:

```bash
cd aws/terraform
terraform init
terraform plan
terraform apply
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- `src/cli` ‚Äî —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ CLI.
- `src/config` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.
- `src/copart` ‚Äî –ª–æ–≥–∏–∫–∞ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ Copart.
- `src/iaai` ‚Äî HTML-–ø–∞—Ä—Å–µ—Ä IAAI –∏ –∫—Ä–æ–Ω-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫.
- `src/services` –∏ `src/utils` ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã/—É—Ç–∏–ª–∏—Ç—ã.
- `config` ‚Äî –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ JSON-–∫–æ–Ω—Ñ–∏–≥–∏ + –ø—Ä–∏–º–µ—Ä env-—Ñ–∞–π–ª–∞.
- `data` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∏—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ª–æ—Ç–æ–≤ –∏ —Ç.–ø.).
- `artifacts` ‚Äî —Ç—è–∂—ë–ª—ã–µ HTML-–¥–∞–º–ø—ã.
- `aws/` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ AWS.

